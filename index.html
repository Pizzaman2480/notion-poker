<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éù„Éº„Ç´„Éº„Éè„É≥„ÉâË®òÈå≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f8f9fa;
            padding: 20px;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 24px;
            margin-bottom: 24px;
            color: #1a1a1a;
        }

        /* „Ç≤„Éº„É†„Çø„Ç§„ÉóÈÅ∏Êäû */
        .game-type-section {
            margin-bottom: 24px;
        }

        .game-type-toggle {
            display: flex;
            gap: 12px;
        }

        .btn-toggle {
            padding: 10px 20px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-toggle:hover {
            border-color: #0066cc;
        }

        .btn-toggle.active {
            background: #0066cc;
            color: white;
            border-color: #0066cc;
        }

        /* „Éñ„É©„Ç§„É≥„ÉâË®≠ÂÆö */
        .blinds-section {
            margin-bottom: 24px;
        }

        .blinds-input {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .blind-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .blind-item label {
            font-weight: 600;
            font-size: 14px;
        }

        .blind-item input {
            width: 80px;
            padding: 8px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
        }

        h2 {
            font-size: 18px;
            margin-top: 24px;
            margin-bottom: 16px;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }

        /* „Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ */
        .players-section {
            margin-bottom: 24px;
        }

        /* Ëá™ÂàÜ„ÅÆ„Éè„É≥„Éâ */
        .my-hand-section {
            margin-bottom: 24px;
            padding: 16px;
            background: #e7f3ff;
            border-radius: 8px;
            border: 2px solid #0066cc;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .player-card {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            position: relative;
        }

        .player-card.my-position {
            background: #e7f3ff;
            border-color: #0066cc;
        }

        .player-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .my-tag {
            background: #0066cc;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .player-actions {
            display: flex;
            gap: 4px;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 12px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-small:hover {
            background: #e9ecef;
        }

        .btn-my {
            background: #0066cc;
            color: white;
            border-color: #0066cc;
        }

        .btn-my:hover {
            background: #0052a3;
        }

        .btn-remove {
            color: #dc3545;
            border-color: #dc3545;
        }

        .btn-remove:hover {
            background: #dc3545;
            color: white;
        }

        .btn-add {
            padding: 10px 16px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-add:hover {
            background: #218838;
        }

        /* „Ç´„Éº„ÉâÈÅ∏Êäû */
        .card-selection {
            margin: 16px 0;
        }

        .card-suits {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .suit-row {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .suit-label {
            font-size: 20px;
            width: 30px;
            text-align: center;
        }

        .card-btn {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            min-width: 40px;
        }

        .card-btn:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        .card-btn.selected {
            background: #0066cc;
            color: white;
            border-color: #0066cc;
        }

        .card-btn.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .selected-cards {
            margin-top: 12px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            min-height: 50px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .card-display {
            background: white;
            padding: 8px 12px;
            border-radius: 6px;
            border: 2px solid #dee2e6;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .card-display:hover {
            background: #ffe0e0;
            border-color: #dc3545;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥Ë®òÈå≤ */
        .action-input {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .player-action-grid {
            display: grid;
            gap: 12px;
            margin-bottom: 16px;
        }

        .player-action-row {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 3px solid #dee2e6;
        }

        .player-action-row.my-player {
            background: #e7f3ff;
            border-left-color: #0066cc;
        }

        .player-action-row.folded {
            opacity: 0.4;
            pointer-events: none;
        }

        .player-action-row.has-folded {
            background: #d3d3d3;
            opacity: 0.6;
        }

        .player-label {
            min-width: 80px;
            font-weight: 600;
            font-size: 14px;
        }

        .quick-raise-btns {
            display: flex;
            gap: 4px;
        }

        .btn-quick {
            padding: 6px 10px;
            background: white;
            border: 2px solid #0066cc;
            color: #0066cc;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-quick:hover {
            background: #0066cc;
            color: white;
        }

        .select-input, .text-input {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
        }

        .select-input {
            min-width: 120px;
        }

        .text-input {
            width: 120px;
        }

        .text-input:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
        }

        .btn-action {
            padding: 8px 16px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-action:hover {
            background: #0052a3;
        }

        /* „Çø„Ç§„É†„É©„Ç§„É≥ */
        .timeline {
            margin-top: 16px;
        }

        .street-section {
            margin-bottom: 24px;
        }

        .street-header {
            background: #0066cc;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .street-cards {
            font-size: 18px;
        }

        .action-list {
            margin-top: 8px;
            padding-left: 16px;
        }

        .action-item {
            padding: 8px 12px;
            background: #f8f9fa;
            border-left: 3px solid #0066cc;
            margin-bottom: 8px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .action-item.my-action {
            background: #e7f3ff;
            border-left-color: #0052a3;
        }

        .action-remove {
            color: #dc3545;
            cursor: pointer;
            font-size: 12px;
            padding: 4px 8px;
        }

        .action-remove:hover {
            text-decoration: underline;
        }

        /* Âá∫Âäõ„Ç®„É™„Ç¢ */
        .output-section {
            margin-top: 24px;
        }

        .output-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            padding: 16px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 12px;
        }

        .btn-copy {
            padding: 10px 20px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .btn-copy:hover {
            background: #218838;
        }

        .btn-copy.copied {
            background: #6c757d;
        }

        .empty-message {
            color: #6c757d;
            font-style: italic;
        }

        /* „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥ */
        .showdown-section {
            margin-top: 24px;
        }

        .showdown-grid {
            display: grid;
            gap: 12px;
            margin-bottom: 16px;
        }

        .showdown-player {
            display: flex;
            gap: 8px;
            align-items: center;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .showdown-player-label {
            min-width: 80px;
            font-weight: 600;
        }

        .result-input {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 16px;
        }

        .result-input label {
            font-weight: 600;
        }

        .result-input input {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
            width: 200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üÉè „Éù„Éº„Ç´„Éº„Éè„É≥„ÉâË®òÈå≤</h1>

        <!-- „Ç≤„Éº„É†„Çø„Ç§„ÉóÈÅ∏Êäû -->
        <div class="game-type-section">
            <h2>„Ç≤„Éº„É†„Çø„Ç§„Éó</h2>
            <div class="game-type-toggle">
                <button class="btn-toggle" id="btnTournament" onclick="selectGameType('tournament')">„Éà„Éº„Éä„É°„É≥„Éà</button>
                <button class="btn-toggle" id="btnRing" onclick="selectGameType('ring')">„É™„É≥„Ç∞„Ç≤„Éº„É†</button>
            </div>
        </div>

        <!-- „Éñ„É©„Ç§„É≥„Éâ„Éª„Ç¢„É≥„ÉÜ„Ç£Ë®≠ÂÆö -->
        <div class="blinds-section">
            <h2>„Éñ„É©„Ç§„É≥„Éâ„Éª„Ç¢„É≥„ÉÜ„Ç£Ë®≠ÂÆö</h2>
            <div class="blinds-input">
                <div class="blind-item">
                    <label>SB:</label>
                    <input type="text" id="sbAmount" placeholder="100">
                </div>
                <div class="blind-item">
                    <label>BB:</label>
                    <input type="text" id="bbAmount" placeholder="200">
                </div>
                <div class="blind-item">
                    <label>„Ç¢„É≥„ÉÜ„Ç£:</label>
                    <input type="text" id="anteAmount" placeholder="-">
                </div>
            </div>
        </div>

        <!-- „Éó„É¨„Ç§„É§„ÉºÁÆ°ÁêÜ -->
        <div class="players-section">
            <h2>„Éó„É¨„Ç§„É§„ÉºË®≠ÂÆö</h2>
            <div class="players-grid" id="playersGrid"></div>
            <div style="display: flex; gap: 12px;">
                <button class="btn-add" onclick="addPlayer()">+ „Éó„É¨„Ç§„É§„ÉºËøΩÂä†</button>
                <button class="btn-add" style="background: #dc3545;" onclick="removePlayer()">- „Éó„É¨„Ç§„É§„ÉºÂâäÈô§</button>
            </div>
        </div>

        <!-- Ëá™ÂàÜ„ÅÆ„Éè„É≥„Éâ -->
        <div class="my-hand-section" id="myHandSection" style="display: none;">
            <h2>Ëá™ÂàÜ„ÅÆ„Éè„É≥„ÉâÔºà2ÊûöÈÅ∏ÊäûÔºâ</h2>
            <div class="card-suits">
                <div class="suit-row">
                    <span class="suit-label">‚ô†Ô∏è</span>
                    <div id="myHandSpades"></div>
                </div>
                <div class="suit-row">
                    <span class="suit-label">‚ô•Ô∏è</span>
                    <div id="myHandHearts"></div>
                </div>
                <div class="suit-row">
                    <span class="suit-label">‚ô¶Ô∏è</span>
                    <div id="myHandDiamonds"></div>
                </div>
                <div class="suit-row">
                    <span class="suit-label">‚ô£Ô∏è</span>
                    <div id="myHandClubs"></div>
                </div>
            </div>
            <div class="selected-cards" id="selectedMyHand"></div>
        </div>

        <!-- Preflop -->
        <div class="street-section">
            <h2>Preflop</h2>
            <div class="player-action-grid" id="preflopActionGrid"></div>
        </div>

        <!-- Flop -->
        <div class="street-section">
            <h2>Flop</h2>
            <div class="card-selection">
                <strong>„Éú„Éº„Éâ„Ç´„Éº„ÉâÔºà3ÊûöÈÅ∏ÊäûÔºâ</strong>
                <div class="card-suits">
                    <div class="suit-row">
                        <span class="suit-label">‚ô†Ô∏è</span>
                        <div id="flopSpades"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô•Ô∏è</span>
                        <div id="flopHearts"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô¶Ô∏è</span>
                        <div id="flopDiamonds"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô£Ô∏è</span>
                        <div id="flopClubs"></div>
                    </div>
                </div>
                <div class="selected-cards" id="selectedFlopCards"></div>
            </div>
            
            <div class="player-action-grid" id="flopActionGrid"></div>
        </div>

        <!-- Turn -->
        <div class="street-section">
            <h2>Turn</h2>
            <div class="card-selection">
                <strong>„Éú„Éº„Éâ„Ç´„Éº„ÉâÔºà1ÊûöËøΩÂä†Ôºâ</strong>
                <div class="card-suits">
                    <div class="suit-row">
                        <span class="suit-label">‚ô†Ô∏è</span>
                        <div id="turnSpades"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô•Ô∏è</span>
                        <div id="turnHearts"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô¶Ô∏è</span>
                        <div id="turnDiamonds"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô£Ô∏è</span>
                        <div id="turnClubs"></div>
                    </div>
                </div>
                <div class="selected-cards" id="selectedTurnCards"></div>
            </div>
            
            <div class="player-action-grid" id="turnActionGrid"></div>
        </div>

        <!-- River -->
        <div class="street-section">
            <h2>River</h2>
            <div class="card-selection">
                <strong>„Éú„Éº„Éâ„Ç´„Éº„ÉâÔºà1ÊûöËøΩÂä†Ôºâ</strong>
                <div class="card-suits">
                    <div class="suit-row">
                        <span class="suit-label">‚ô†Ô∏è</span>
                        <div id="riverSpades"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô•Ô∏è</span>
                        <div id="riverHearts"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô¶Ô∏è</span>
                        <div id="riverDiamonds"></div>
                    </div>
                    <div class="suit-row">
                        <span class="suit-label">‚ô£Ô∏è</span>
                        <div id="riverClubs"></div>
                    </div>
                </div>
                <div class="selected-cards" id="selectedRiverCards"></div>
            </div>
            
            <div class="player-action-grid" id="riverActionGrid"></div>
        </div>

        <!-- Âá∫Âäõ -->
        <div class="output-section">
            <h2>Âá∫Âäõ„ÉÜ„Ç≠„Çπ„Éà</h2>
            <div class="output-box" id="outputBox"></div>
            <button class="btn-copy" id="copyBtn" onclick="copyToClipboard()">üìã „Ç≥„Éî„Éº</button>
        </div>

        <!-- „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥ -->
        <div class="showdown-section">
            <h2>„Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥</h2>
            <div id="showdownGrid" class="showdown-grid"></div>
            <div class="result-input">
                <label>ÂèéÊîØ:</label>
                <input type="text" id="resultAmount" placeholder="‰æã: +15bb or -10bb">
            </div>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        const fixedPositions = ['SB', 'BB', 'UTG', 'MP', 'CO', 'BTN'];
        let players = ['SB', 'BB', 'UTG', 'MP', 'CO', 'BTN']; // „Éá„Éï„Ç©„É´„Éà6‰∫∫
        let myPosition = null;
        let gameType = null; // 'tournament' or 'ring'
        let currentPot = 0; // ÁèæÂú®„ÅÆ„Éù„ÉÉ„Éà„Çµ„Ç§„Ç∫ÔºàBBÂçò‰ΩçÔºâ
        let foldedPlayers = {
            preflop: new Set(),
            flop: new Set(),
            turn: new Set(),
            river: new Set()
        };
        
        const cards = {
            holeCards: [],
            flopCards: [],
            turnCards: [],
            riverCards: []
        };

        const playerActions = {
            preflop: {},
            flop: {},
            turn: {},
            river: {}
        };

        const showdownHands = {};

        const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        const suits = {
            spades: '‚ô†Ô∏è',
            hearts: '‚ô•Ô∏è',
            diamonds: '‚ô¶Ô∏è',
            clubs: '‚ô£Ô∏è'
        };

        // „Ç≤„Éº„É†„Çø„Ç§„ÉóÈÅ∏Êäû
        function selectGameType(type) {
            gameType = type;
            document.getElementById('btnTournament').classList.toggle('active', type === 'tournament');
            document.getElementById('btnRing').classList.toggle('active', type === 'ring');
            updateOutput();
        }

        // „Éó„É¨„Ç§„É§„Éº„Çí„Ç¢„ÇØ„Ç∑„Éß„É≥È†Ü„Å´‰∏¶„ÅπÊõø„ÅàÔºà„Éó„É™„Éï„É≠„ÉÉ„ÉóÁî®Ôºâ
        function getPlayersInActionOrder(street) {
            if (street !== 'preflop') {
                return [...players];
            }
            
            // BB„ÅÆ‰ΩçÁΩÆ„ÇíË¶ã„Å§„Åë„Çã
            const bbIndex = players.indexOf('BB');
            if (bbIndex === -1) return [...players];
            
            // BB„ÅÆÊ¨°„ÅÆ„Éó„É¨„Ç§„É§„Éº„Åã„ÇâÂßã„Åæ„Çä„ÄÅBB„ÅßÁµÇ„Çè„ÇãÈ†ÜÂ∫è
            const ordered = [];
            for (let i = 1; i <= players.length; i++) {
                const index = (bbIndex + i) % players.length;
                ordered.push(players[index]);
            }
            
            return ordered;
        }

        // ÂàùÊúüÂåñ
        function init() {
            renderPlayers();
            renderCardButtons();
            renderActionGrids();
            renderShowdown();
            // Turn/River„ÅÆÂàùÊúüË°®Á§∫„ÇíÊõ¥Êñ∞
            updateCardDisplay('selectedTurnCards', cards.turnCards);
            updateCardDisplay('selectedRiverCards', cards.riverCards);
            updateOutput();
        }

        // UTG+„ÅÆÊï∞„Çí„Ç´„Ç¶„É≥„Éà
        function countUTGPlus() {
            return players.filter(p => p.startsWith('UTG+')).length;
        }

        // „Éó„É¨„Ç§„É§„ÉºËøΩÂä†ÔºàÈ†ÜÂ∫è: SB, BB, UTG, UTG+N..., MP, CO, BTNÔºâ
        // „Éó„É¨„Ç§„É§„ÉºËøΩÂä†ÔºàËøΩÂä†È†Ü: BTN ‚Üí CO ‚Üí MP ‚Üí UTG ‚Üí HJ ‚Üí +1 ‚Üí +2...Ôºâ
        function addPlayer() {
            // 6‰∫∫„Åæ„Åß„ÅÆËøΩÂä†È†ÜÂ∫èÔºàÁèæÂú®„ÅÆ players „Å´Âê´„Åæ„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÇÇ„ÅÆ„ÇíËøΩÂä†Ôºâ
            const basicOrder = ['BTN', 'CO', 'MP', 'UTG', 'HJ'];
            
            for (let pos of basicOrder) {
                if (!players.includes(pos)) {
                    // Ê≠£„Åó„ÅÑ‰ΩçÁΩÆ„Å´ÊåøÂÖ•
                    if (pos === 'UTG') {
                        // SB, BB„ÅÆÁõ¥ÂæåÔºà„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ2Ôºâ
                        players.splice(2, 0, pos);
                    } else if (pos === 'HJ') {
                        // UTG„ÅÆÁõ¥Âæå
                        const utgIndex = players.indexOf('UTG');
                        if (utgIndex !== -1) {
                            players.splice(utgIndex + 1, 0, pos);
                        } else {
                            players.splice(2, 0, pos);
                        }
                    } else if (pos === 'MP') {
                        // HJ„ÅÆÂæå„ÄÅCO„ÅÆÂâç
                        const coIndex = players.indexOf('CO');
                        if (coIndex !== -1) {
                            players.splice(coIndex, 0, pos);
                        } else {
                            const hjIndex = players.indexOf('HJ');
                            if (hjIndex !== -1) {
                                players.splice(hjIndex + 1, 0, pos);
                            } else {
                                players.push(pos);
                            }
                        }
                    } else if (pos === 'CO') {
                        // MP„ÅÆÂæå„ÄÅBTN„ÅÆÂâç
                        const btnIndex = players.indexOf('BTN');
                        if (btnIndex !== -1) {
                            players.splice(btnIndex, 0, pos);
                        } else {
                            players.push(pos);
                        }
                    } else if (pos === 'BTN') {
                        // ÊúÄÂæå
                        players.push(pos);
                    }
                    
                    renderPlayers();
                    renderActionGrids();
                    renderShowdown();
                    return;
                }
            }
            
            // 7‰∫∫ÁõÆ‰ª•Èôç: +1, +2... „ÇíËøΩÂä†
            const plusCount = players.filter(p => p.match(/^\+\d+$/)).length;
            const newPosition = `+${plusCount + 1}`;
            
            // HJ„ÅÆÂæå„ÄÅMP„ÅÆÂâç„Å´ÊåøÂÖ•
            const mpIndex = players.indexOf('MP');
            if (mpIndex !== -1) {
                // Êó¢Â≠ò„ÅÆ+„ÅÆÊúÄÂæå„ÅÆ‰ΩçÁΩÆ„ÇíÊé¢„Åô
                let insertIndex = players.indexOf('HJ') + 1;
                while (insertIndex < mpIndex && players[insertIndex].match(/^\+\d+$/)) {
                    insertIndex++;
                }
                players.splice(insertIndex, 0, newPosition);
            } else {
                // MP„Åå„Å™„ÅÑÂ†¥Âêà„ÅØHJ„ÅÆÁõ¥Âæå
                const hjIndex = players.indexOf('HJ');
                if (hjIndex !== -1) {
                    players.splice(hjIndex + 1, 0, newPosition);
                } else {
                    players.push(newPosition);
                }
            }
            
            renderPlayers();
            renderActionGrids();
            renderShowdown();
        }

        // „Éó„É¨„Ç§„É§„ÉºÂâäÈô§ÔºàÂâäÈô§È†Ü: +2 ‚Üí +1 ‚Üí HJ ‚Üí UTG ‚Üí MP ‚Üí CO ‚Üí BTNÔºâ
        function removePlayer() {
            if (players.length <= 2) {
                alert('SB„Å®BB„ÅØÂøÖÈ†à„Åß„Åô');
                return;
            }
            
            // ÂâäÈô§ÂÑ™ÂÖàÈ†Ü‰ΩçÔºàÈôçÈ†ÜÔºâ
            const plusPlayers = players.filter(p => p.match(/^\+\d+$/)).sort((a, b) => {
                const numA = parseInt(a.substring(1));
                const numB = parseInt(b.substring(1));
                return numB - numA; // +2, +1„ÅÆÈ†Ü
            });
            
            const removeOrder = [...plusPlayers, 'HJ', 'UTG', 'MP', 'CO', 'BTN'];
            
            // ÂâäÈô§ÂèØËÉΩ„Å™ÊúÄÂàù„ÅÆ„Éó„É¨„Ç§„É§„Éº„ÇíÂâäÈô§
            for (let pos of removeOrder) {
                if (players.includes(pos)) {
                    players = players.filter(p => p !== pos);
                    
                    if (myPosition === pos) {
                        myPosition = null;
                        document.getElementById('myHandSection').style.display = 'none';
                    }
                    
                    renderPlayers();
                    renderActionGrids();
                    renderShowdown();
                    return;
                }
            }
            
            alert('„Åì„Çå‰ª•‰∏äÂâäÈô§„Åß„Åç„Åæ„Åõ„ÇìÔºàSB„Å®BB„ÅØÂøÖÈ†àÔºâ');
        }

        // „Éû„Ç§„Éù„Ç∏„Ç∑„Éß„É≥Ë®≠ÂÆö
        function setMyPosition(position) {
            myPosition = position;
            renderPlayers();
            renderActionGrids();
            document.getElementById('myHandSection').style.display = 'block';
        }

        // „Éó„É¨„Ç§„É§„ÉºË°®Á§∫
        function renderPlayers() {
            const grid = document.getElementById('playersGrid');
            grid.innerHTML = '';
            
            players.forEach(player => {
                const isMyPos = player === myPosition;
                const card = document.createElement('div');
                card.className = `player-card ${isMyPos ? 'my-position' : ''}`;
                
                card.innerHTML = `
                    <div class="player-name">
                        ${player}
                        ${isMyPos ? '<span class="my-tag">üë§ ME</span>' : ''}
                    </div>
                    <div class="player-actions">
                        ${!isMyPos ? `<button class="btn-small btn-my" onclick="setMyPosition('${player}')">üë§</button>` : ''}
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // „Ç´„Éº„Éâ„Éú„Çø„É≥ÁîüÊàê
        function renderCardButtons() {
            // Ëá™ÂàÜ„ÅÆ„Éè„É≥„ÉâÁî®
            ['myHand', 'flop', 'turn', 'river'].forEach(prefix => {
                Object.keys(suits).forEach(suit => {
                    let containerId;
                    if (prefix === 'myHand') {
                        containerId = `myHand${suit.charAt(0).toUpperCase() + suit.slice(1)}`;
                    } else {
                        containerId = `${prefix}${suit.charAt(0).toUpperCase() + suit.slice(1)}`;
                    }
                    
                    const container = document.getElementById(containerId);
                    if (!container) return;
                    
                    container.innerHTML = '';
                    ranks.forEach(rank => {
                        const btn = document.createElement('button');
                        btn.className = 'card-btn';
                        btn.textContent = rank;
                        btn.onclick = () => selectCard(suits[suit], rank, prefix === 'myHand' ? '' : prefix);
                        container.appendChild(btn);
                    });
                });
            });
        }

        // „Ç¢„ÇØ„Ç∑„Éß„É≥„Ç∞„É™„ÉÉ„Éâ„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderActionGrids() {
            ['preflop', 'flop', 'turn', 'river'].forEach(street => {
                renderActionGrid(street);
            });
        }

        // ÂêÑ„Çπ„Éà„É™„Éº„Éà„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Ç∞„É™„ÉÉ„Éâ„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderActionGrid(street) {
            const grid = document.getElementById(`${street}ActionGrid`);
            if (!grid) return;
            
            grid.innerHTML = '';
            
            // Folded„Éó„É¨„Ç§„É§„Éº„ÇíÂèñÂæó
            const folded = getFoldedPlayersForStreet(street);
            
            // „Éó„É¨„Ç§„É§„Éº„Çí„Ç¢„ÇØ„Ç∑„Éß„É≥È†Ü„Å´ÂèñÂæó
            const orderedPlayers = getPlayersInActionOrder(street);
            
            // „Ç¢„ÇØ„Ç∑„Éß„É≥È†ÜÂ∫è„ÇíÊßãÁØâÔºàË§áÊï∞Âõû„Ç¢„ÇØ„Ç∑„Éß„É≥Âê´„ÇÄÔºâ
            const actionSequence = [];
            orderedPlayers.forEach(player => {
                if (folded.has(player)) return;
                
                const actions = playerActions[street] && playerActions[street][player];
                if (actions) {
                    const actionList = Array.isArray(actions) ? actions : [actions];
                    actionList.forEach((action, index) => {
                        actionSequence.push({
                            player,
                            action: action.action,
                            amount: action.amount,
                            actionIndex: index
                        });
                    });
                }
            });
            
            // ÊúÄÂæå„ÅÆBet/Raise/Allin„ÇíË¶ã„Å§„Åë„Çã
            let lastAggressiveIndex = -1;
            for (let i = actionSequence.length - 1; i >= 0; i--) {
                if (['Bet', 'Raise', 'Allin'].includes(actionSequence[i].action)) {
                    lastAggressiveIndex = i;
                    break;
                }
            }
            
            // ÂÜç„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Å™„Éó„É¨„Ç§„É§„Éº„ÇíÂà§ÂÆö
            const playersNeedingReaction = new Set();
            
            if (lastAggressiveIndex >= 0) {
                const aggressivePlayer = actionSequence[lastAggressiveIndex].player;
                
                // ÊúÄÂæå„ÅÆBet/Raise/Allin„Äå„Çà„ÇäÂâç„Äç„Å´„Ç¢„ÇØ„Ç∑„Éß„É≥„Åó„Åü„Éó„É¨„Ç§„É§„ÉºÔºàFold‰ª•Â§ñÔºâ
                for (let i = 0; i < lastAggressiveIndex; i++) {
                    const item = actionSequence[i];
                    if (item.action !== 'Fold' && item.player !== aggressivePlayer) {
                        playersNeedingReaction.add(item.player);
                    }
                }
                
                // ÊúÄÂæå„ÅÆBet/Raise/Allin„Äå„Çà„ÇäÂæå„Äç„Å´Call„Åó„Åü„Éó„É¨„Ç§„É§„Éº„ÅØÈô§Â§ñ
                for (let i = lastAggressiveIndex + 1; i < actionSequence.length; i++) {
                    const item = actionSequence[i];
                    if (item.action === 'Call' || item.action === 'Fold' || ['Bet', 'Raise', 'Allin'].includes(item.action)) {
                        playersNeedingReaction.delete(item.player);
                    }
                }
            }
            
            // ÂÖ®„Éó„É¨„Ç§„É§„Éº„ÅÆÂàùÂõûÂÖ•ÂäõÊ¨Ñ„ÇíË°®Á§∫
            orderedPlayers.forEach(player => {
                if (folded.has(player)) return;
                renderPlayerActionRow(grid, street, player, false);
            });
            
            // ÂÜç„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅåÂøÖË¶Å„Å™„Éó„É¨„Ç§„É§„Éº„ÅÆÂÖ•ÂäõÊ¨Ñ„ÇíËøΩÂä†
            if (playersNeedingReaction.size > 0) {
                orderedPlayers.forEach(player => {
                    if (playersNeedingReaction.has(player)) {
                        renderPlayerActionRow(grid, street, player, true);
                    }
                });
            }
        }

        // „Éó„É¨„Ç§„É§„Éº„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥Ë°å„Çí„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderPlayerActionRow(grid, street, player, isReaction) {
            const isMyPos = player === myPosition;
            const row = document.createElement('div');
            const rowId = `${street}-${player}${isReaction ? '-re' : ''}`;
            row.className = `player-action-row ${isMyPos ? 'my-player' : ''}`;
            row.id = rowId;
            
            // „Ç¢„ÇØ„Ç∑„Éß„É≥„Ç™„Éó„Ç∑„Éß„É≥ÔºàBB„ÅÆPreflop„ÅÆÂ†¥Âêà„ÅØCheck„ÇíËøΩÂä†Ôºâ
            let actionOptions;
            if (street === 'preflop') {
                if (player === 'BB' && !isReaction) {
                    // BB„ÅÆÂàùÂõû„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÂ†¥Âêà„ÅÆ„ÅøCheck„ÇíËøΩÂä†
                    actionOptions = ['', 'Check', 'Fold', 'Call', 'Raise', 'Allin'];
                } else {
                    actionOptions = ['', 'Fold', 'Call', 'Raise', 'Allin'];
                }
            } else {
                actionOptions = ['', 'Check', 'Fold', 'Call', 'Bet', 'Raise', 'Allin'];
            }
            
            const selectOptions = actionOptions.map(act => 
                `<option value="${act}">${act || '-'}</option>`
            ).join('');
            
            // „ÇØ„Ç§„ÉÉ„ÇØ„Éú„Çø„É≥
            let quickBtns = '';
            if (street === 'preflop') {
                quickBtns = `
                    <div class="quick-raise-btns">
                        <button class="btn-quick" onclick="setQuickRaise('${street}', '${player}', 2, ${isReaction})">√ó2</button>
                        <button class="btn-quick" onclick="setQuickRaise('${street}', '${player}', 2.5, ${isReaction})">√ó2.5</button>
                        <button class="btn-quick" onclick="setQuickRaise('${street}', '${player}', 3, ${isReaction})">√ó3</button>
                    </div>
                `;
            } else {
                quickBtns = `
                    <div class="quick-raise-btns">
                        <button class="btn-quick" onclick="setQuickBet('${street}', '${player}', 0.33, ${isReaction})">33%</button>
                        <button class="btn-quick" onclick="setQuickBet('${street}', '${player}', 0.5, ${isReaction})">50%</button>
                        <button class="btn-quick" onclick="setQuickBet('${street}', '${player}', 0.75, ${isReaction})">75%</button>
                        <button class="btn-quick" onclick="setQuickBet('${street}', '${player}', 1, ${isReaction})">100%</button>
                    </div>
                `;
            }
            
            row.innerHTML = `
                <span class="player-label">${player}${isMyPos ? ' (ME)' : ''}</span>
                <select class="select-input" onchange="handleActionChange('${street}', '${player}', this.value, ${isReaction})">
                    ${selectOptions}
                </select>
                <input type="text" class="text-input" id="${street}-${player}-amount${isReaction ? '-re' : ''}" placeholder="È°ç" 
                       onchange="handleActionChange('${street}', '${player}', null, ${isReaction})" 
                       disabled>
                ${quickBtns}
            `;
            
            grid.appendChild(row);
            
            // Êó¢Â≠ò„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„Åå„ÅÇ„Çå„Å∞Âæ©ÂÖÉ
            if (playerActions[street] && playerActions[street][player]) {
                const actions = playerActions[street][player];
                const actionList = Array.isArray(actions) ? actions : [actions];
                
                // ÂàùÂõû„Ç¢„ÇØ„Ç∑„Éß„É≥„Åæ„Åü„ÅØÂÜç„Ç¢„ÇØ„Ç∑„Éß„É≥„Å´Âøú„Åò„Å¶Âæ©ÂÖÉ
                const actionToRestore = isReaction && actionList.length > 1 ? actionList[actionList.length - 1] : actionList[0];
                
                if (actionToRestore) {
                    const select = row.querySelector('select');
                    const input = row.querySelector('input');
                    
                    select.value = actionToRestore.action;
                    if (actionToRestore.amount) {
                        input.value = actionToRestore.amount;
                    }
                    
                    // ÂàùÂõû„Ç¢„ÇØ„Ç∑„Éß„É≥„Åß2ÂõûÁõÆ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ„Ç∞„É¨„Éº„Ç¢„Ç¶„Éà
                    if (!isReaction && actionList.length > 1) {
                        row.classList.add('has-reaction');
                        row.style.opacity = '0.5';
                    }
                    
                    // FoldÊôÇ„ÅÆË¶ñË¶öÂá¶ÁêÜ
                    if (actionToRestore.action === 'Fold') {
                        row.classList.add('has-folded');
                        input.disabled = true;
                    } else if (street === 'preflop') {
                        input.disabled = !['Raise', 'Allin'].includes(actionToRestore.action);
                    } else {
                        input.disabled = !['Bet', 'Raise', 'Allin'].includes(actionToRestore.action);
                    }
                }
            }
        }

        // „ÇØ„Ç§„ÉÉ„ÇØ„É¨„Ç§„Ç∫„Éú„Çø„É≥Ôºà„Éó„É™„Éï„É≠„ÉÉ„ÉóÁî®Ôºâ
        function setQuickRaise(street, player, multiplier, isReaction = false) {
            // ÁèæÂú®„ÅÆ„Éù„ÉÉ„Éà„ÇíË®àÁÆóÔºà„Åì„ÅÆ„Éó„É¨„Ç§„É§„Éº„Çà„ÇäÂâç„Åæ„ÅßÔºâ
            const pot = calculatePotBeforePlayer(street, player);
            const raiseAmount = (pot * multiplier).toFixed(1);
            
            const suffix = isReaction ? '-re' : '';
            const input = document.getElementById(`${street}-${player}-amount${suffix}`);
            
            if (input) {
                input.value = `${raiseAmount}bb`;
                handleActionChange(street, player, null, isReaction);
            }
        }
        
        // ÁâπÂÆö„Éó„É¨„Ç§„É§„Éº„Çà„ÇäÂâç„ÅÆ„Éù„ÉÉ„Éà„ÇíË®àÁÆó
        function calculatePotBeforePlayer(street, targetPlayer) {
            let totalPot = 0;
            let currentBet = 0;
            const playerInvested = {};
            
            // „Éó„É™„Éï„É≠„ÉÉ„Éó„ÅÆÂ†¥Âêà„ÄÅSB„Å®BB„ÇíÂàùÊúüË®≠ÂÆö
            if (street === 'preflop') {
                const anteInput = document.getElementById('anteAmount');
                const hasAnte = anteInput && anteInput.value && parseFloat(anteInput.value) > 0;
                
                if (players.includes('SB')) {
                    playerInvested['SB'] = 0.5;
                    totalPot += 0.5;
                    currentBet = 1;
                }
                if (players.includes('BB')) {
                    const bbAmount = hasAnte ? 2 : 1;
                    playerInvested['BB'] = 1;
                    totalPot += bbAmount;
                    currentBet = 1;
                }
            }
            
            // „Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÈ†ÜÁï™„Å´Âá¶ÁêÜÔºàtargetPlayer„Çà„ÇäÂâç„Åæ„ÅßÔºâ
            if (playerActions[street]) {
                const orderedPlayers = getPlayersInActionOrder(street);
                
                for (let player of orderedPlayers) {
                    if (player === targetPlayer) break; // „Åì„ÅÆ„Éó„É¨„Ç§„É§„Éº„Å´Âà∞ÈÅî„Åó„Åü„ÇâÁµÇ‰∫Ü
                    
                    const actions = playerActions[street][player];
                    if (!actions) continue;
                    
                    const actionList = Array.isArray(actions) ? actions : [actions];
                    
                    actionList.forEach(actionData => {
                        const action = actionData.action;
                        const amountStr = actionData.amount || '';
                        
                        if (!playerInvested[player]) {
                            playerInvested[player] = 0;
                        }
                        
                        if (action === 'Call') {
                            const alreadyInvested = playerInvested[player];
                            const toCall = currentBet - alreadyInvested;
                            if (toCall > 0) {
                                totalPot += toCall;
                                playerInvested[player] = currentBet;
                            }
                        } else if (action === 'Raise' || action === 'Bet' || action === 'Allin') {
                            const match = amountStr.match(/(\d+\.?\d*)/);
                            if (match) {
                                const newBetAmount = parseFloat(match[1]);
                                const alreadyInvested = playerInvested[player];
                                const additionalAmount = newBetAmount - alreadyInvested;
                                
                                if (additionalAmount > 0) {
                                    totalPot += additionalAmount;
                                    playerInvested[player] = newBetAmount;
                                    currentBet = newBetAmount;
                                }
                            }
                        }
                    });
                }
            }
            
            return totalPot;
        }

        // „ÇØ„Ç§„ÉÉ„ÇØ„Éô„ÉÉ„Éà„Éú„Çø„É≥Ôºà„Éï„É≠„ÉÉ„Éó‰ª•ÈôçÁî®Ôºâ
        function setQuickBet(street, player, percentage, isReaction = false) {
            // Ââç„ÅÆ„Çπ„Éà„É™„Éº„Éà„Åæ„Åß„ÅÆ„Éù„ÉÉ„Éà„ÇíË®àÁÆó
            const streetOrder = {
                'flop': 'preflop',
                'turn': 'flop',
                'river': 'turn'
            };
            
            const previousStreet = streetOrder[street];
            const pot = previousStreet ? calculateCurrentPot(previousStreet) : 0;
            
            const betAmount = (pot * percentage).toFixed(1);
            const suffix = isReaction ? '-re' : '';
            const input = document.getElementById(`${street}-${player}-amount${suffix}`);
            
            if (input) {
                input.value = `${betAmount}bb`;
                handleActionChange(street, player, null, isReaction);
            }
        }

        // ÁèæÂú®„ÅÆ„Éù„ÉÉ„Éà„ÇíË®àÁÆó
        // ÁèæÂú®„ÅÆ„Éù„ÉÉ„Éà„ÇíË®àÁÆóÔºàÂêÑ„Éó„É¨„Ç§„É§„Éº„ÅÆÊäïÂÖ•È°ç„ÇíÊ≠£Á¢∫„Å´ËøΩË∑°Ôºâ
        function calculateCurrentPot(upToStreet) {
            const streets = ['preflop', 'flop', 'turn', 'river'];
            const stopIndex = streets.indexOf(upToStreet);
            
            console.log(`=== Calculating pot up to ${upToStreet} ===`);
            
            let totalPot = 0;
            
            for (let i = 0; i <= stopIndex; i++) {
                const street = streets[i];
                let currentBet = 0; // „Åì„ÅÆ„Çπ„Éà„É™„Éº„Éà„Åß„ÅÆÁèæÂú®„ÅÆ„Éô„ÉÉ„ÉàÈ°ç
                const playerInvested = {}; // ÂêÑ„Éó„É¨„Ç§„É§„Éº„ÅÆ„Åì„ÅÆ„Çπ„Éà„É™„Éº„Éà„Åß„ÅÆÊäïÂÖ•È°ç
                
                console.log(`Street: ${street}`);
                
                // „Éó„É™„Éï„É≠„ÉÉ„Éó„ÅÆÂ†¥Âêà„ÄÅSB„Å®BB„ÇíÂàùÊúüË®≠ÂÆö
                if (street === 'preflop') {
                    // „Ç¢„É≥„ÉÜ„Ç£„ÅÆÁ¢∫Ë™ç
                    const anteInput = document.getElementById('anteAmount');
                    const hasAnte = anteInput && anteInput.value && parseFloat(anteInput.value) > 0;
                    
                    if (players.includes('SB')) {
                        playerInvested['SB'] = 0.5;
                        totalPot += 0.5;
                        currentBet = 1; // BB„ÅåÂàùÊúü„Éô„ÉÉ„Éà
                        console.log('SB posts 0.5bb, pot: ', totalPot);
                    }
                    if (players.includes('BB')) {
                        const bbAmount = hasAnte ? 2 : 1; // „Ç¢„É≥„ÉÜ„Ç£„ÅÇ„Çä„Å™„Çâ2bb
                        playerInvested['BB'] = 1; // „Éô„ÉÉ„ÉàÈ°ç„ÅØ1bb„ÅÆ„Åæ„Åæ
                        totalPot += bbAmount;
                        currentBet = 1;
                        console.log(`BB posts ${bbAmount}bb${hasAnte ? ' (1bb + 1bb ante)' : ''}, pot: ${totalPot}`);
                    }
                }
                
                // „Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÈ†ÜÁï™„Å´Âá¶ÁêÜ
                if (playerActions[street]) {
                    const orderedPlayers = getPlayersInActionOrder(street);
                    
                    orderedPlayers.forEach(player => {
                        const actions = playerActions[street][player];
                        if (!actions) return;
                        
                        const actionList = Array.isArray(actions) ? actions : [actions];
                        
                        actionList.forEach(actionData => {
                            const action = actionData.action;
                            const amountStr = actionData.amount || '';
                            
                            if (!playerInvested[player]) {
                                playerInvested[player] = 0;
                            }
                            
                            if (action === 'Call') {
                                // „Ç≥„Éº„É´ÔºöÁèæÂú®„ÅÆ„Éô„ÉÉ„ÉàÈ°ç„Åæ„Åß„ÄåÂ∑ÆÈ°ç„Äç„ÇíËøΩÂä†
                                const alreadyInvested = playerInvested[player];
                                const toCall = currentBet - alreadyInvested;
                                
                                if (toCall > 0) {
                                    totalPot += toCall;
                                    playerInvested[player] = currentBet;
                                    console.log(`${player} calls ${toCall}bb, pot: ${totalPot}`);
                                }
                            } else if (action === 'Raise' || action === 'Bet' || action === 'Allin') {
                                // „É¨„Ç§„Ç∫/„Éô„ÉÉ„Éà/„Ç™„Éº„É´„Ç§„É≥
                                const match = amountStr.match(/(\d+\.?\d*)/);
                                if (match) {
                                    const newBetAmount = parseFloat(match[1]);
                                    const alreadyInvested = playerInvested[player];
                                    const additionalAmount = newBetAmount - alreadyInvested;
                                    
                                    if (additionalAmount > 0) {
                                        totalPot += additionalAmount;
                                        playerInvested[player] = newBetAmount;
                                        currentBet = newBetAmount; // Êñ∞„Åó„ÅÑ„Éô„ÉÉ„ÉàÈ°ç„ÇíË®≠ÂÆö
                                        console.log(`${player} ${action} to ${newBetAmount}bb (adds ${additionalAmount}bb), pot: ${totalPot}`);
                                    }
                                }
                            } else if (action === 'Fold') {
                                console.log(`${player} folds`);
                            } else if (action === 'Check') {
                                console.log(`${player} checks`);
                            }
                        });
                    });
                }
            }
            
            console.log(`Total pot: ${totalPot}bb`);
            console.log('========================');
            return totalPot;
        }

        // „Ç¢„ÇØ„Ç∑„Éß„É≥Â§âÊõ¥„Éè„É≥„Éâ„É©ÔºàË§áÊï∞Âõû„Ç¢„ÇØ„Ç∑„Éß„É≥ÂØæÂøúÔºâ
        function handleActionChange(street, player, actionValue, isReaction = false) {
            const suffix = isReaction ? '-re' : '';
            const row = document.getElementById(`${street}-${player}${suffix}`);
            if (!row) {
                console.error(`Row not found: ${street}-${player}${suffix}`);
                return;
            }
            
            const select = row.querySelector('select');
            const input = row.querySelector('input');
            
            if (!select || !input) {
                console.error('Select or input not found');
                return;
            }
            
            const action = actionValue || select.value;
            let amount = input.value.trim();
            
            // ÊâãÂÖ•Âäõ„ÅÆÊï∞ÂÄ§„Å´Ëá™Âãï„Åß„Äåbb„Äç„ÇíËøΩÂä†
            if (amount && !amount.includes('bb')) {
                const numMatch = amount.match(/^(\d+\.?\d*)$/);
                if (numMatch) {
                    amount = `${numMatch[1]}bb`;
                    input.value = amount; // Ë°®Á§∫„ÇíÊõ¥Êñ∞
                }
            }
            
            // „Ç¢„ÇØ„Ç∑„Éß„É≥„Å´Âøú„Åò„Å¶ÂÖ•ÂäõÊ¨Ñ„ÅÆÊúâÂäπ/ÁÑ°Âäπ„ÇíÂàá„ÇäÊõø„Åà
            if (street === 'preflop') {
                input.disabled = !['Raise', 'Allin'].includes(action);
            } else {
                input.disabled = !['Bet', 'Raise', 'Allin'].includes(action);
            }
            
            // ÁÑ°Âäπ„Å™Â†¥Âêà„ÅØÈáëÈ°ç„Çí„ÇØ„É™„Ç¢
            if (input.disabled && !['Raise', 'Allin', 'Bet'].includes(action)) {
                input.value = '';
                amount = '';
            }
            
            // FoldÊôÇ„ÅÆË¶ñË¶öÂá¶ÁêÜ
            if (action === 'Fold') {
                row.classList.add('has-folded');
            } else {
                row.classList.remove('has-folded');
            }
            
            // „Éá„Éº„Çø„Çí‰øùÂ≠ò
            if (!playerActions[street]) {
                playerActions[street] = {};
            }
            
            if (!action || action === '') {
                // Á©∫„ÅÆÂ†¥Âêà„ÅØÂâäÈô§
                if (isReaction && playerActions[street][player]) {
                    // ÂÜç„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÂâäÈô§ÔºàÊúÄÂæå„ÅÆË¶ÅÁ¥†„ÇíÂâäÈô§Ôºâ
                    const actions = playerActions[street][player];
                    if (Array.isArray(actions) && actions.length > 1) {
                        actions.pop();
                    }
                } else {
                    delete playerActions[street][player];
                }
            } else {
                // „Ç¢„ÇØ„Ç∑„Éß„É≥„Çí‰øùÂ≠ò
                const actionData = {
                    action,
                    amount: amount, // „Äåbb„Äç‰ªò„Åç„ÅÆÈáëÈ°ç„Çí‰øùÂ≠ò
                    isMe: player === myPosition
                };
                
                if (!playerActions[street][player]) {
                    playerActions[street][player] = [actionData];
                } else {
                    const existing = playerActions[street][player];
                    const actionArray = Array.isArray(existing) ? existing : [existing];
                    
                    if (isReaction) {
                        // ÂÜç„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÂ†¥Âêà„ÅØËøΩÂä†
                        if (actionArray.length > 1) {
                            actionArray[actionArray.length - 1] = actionData; // ÊúÄÂæå„ÇíÊõ¥Êñ∞
                        } else {
                            actionArray.push(actionData);
                        }
                    } else {
                        // ÂàùÂõû„Ç¢„ÇØ„Ç∑„Éß„É≥„ÅÆÂ†¥Âêà„ÅØÊúÄÂàù„ÇíÊõ¥Êñ∞
                        actionArray[0] = actionData;
                    }
                    
                    playerActions[street][player] = actionArray;
                }
                
                // Fold„ÅÆÂ†¥Âêà„ÄÅÊ¨°„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅßÈùûË°®Á§∫
                if (action === 'Fold') {
                    addFoldedPlayer(street, player);
                }
            }
            
            // ÂÜç„É¨„É≥„ÉÄ„É™„É≥„Ç∞
            renderActionGrid(street);
            updateOutput();
            renderShowdown();
        }

        // Folded„Éó„É¨„Ç§„É§„Éº„ÇíËøΩÂä†
        function addFoldedPlayer(street, player) {
            const streets = ['preflop', 'flop', 'turn', 'river'];
            const currentIndex = streets.indexOf(street);
            
            // ÁèæÂú®„ÅÆ„Çπ„Éà„É™„Éº„Éà‰ª•Èôç„Åß„Éï„Ç©„Éº„É´„ÉâÊâ±„ÅÑ„Å´„Åô„Çã
            for (let i = currentIndex + 1; i < streets.length; i++) {
                foldedPlayers[streets[i]].add(player);
            }
            
            // Ê¨°„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅÆ„Ç∞„É™„ÉÉ„Éâ„ÇíÂÜç„É¨„É≥„ÉÄ„É™„É≥„Ç∞
            if (currentIndex < streets.length - 1) {
                renderActionGrid(streets[currentIndex + 1]);
            }
        }

        // ÁâπÂÆö„Çπ„Éà„É™„Éº„Éà„Åß„Éï„Ç©„Éº„É´„ÉâÊ∏à„Åø„ÅÆ„Éó„É¨„Ç§„É§„Éº„ÇíÂèñÂæó
        // ÁâπÂÆö„Çπ„Éà„É™„Éº„Éà„Åß„Éï„Ç©„Éº„É´„ÉâÊ∏à„Åø„ÅÆ„Éó„É¨„Ç§„É§„Éº„ÇíÂèñÂæó
        function getFoldedPlayersForStreet(street) {
            const folded = new Set();
            const streets = ['preflop', 'flop', 'turn', 'river'];
            const currentIndex = streets.indexOf(street);
            
            // ÁèæÂú®„ÅÆ„Çπ„Éà„É™„Éº„Éà„Åß„Éï„Ç©„Éº„É´„Éâ„Åó„Åü„Éó„É¨„Ç§„É§„Éº„ÇÇÂê´„ÇÅ„Çã
            for (let i = 0; i <= currentIndex; i++) {
                const streetActions = playerActions[streets[i]];
                if (!streetActions) continue; // undefined„ÉÅ„Çß„ÉÉ„ÇØ
                
                Object.entries(streetActions).forEach(([player, actions]) => {
                    if (!actions) return;
                    
                    // „Ç¢„ÇØ„Ç∑„Éß„É≥„ÅåÈÖçÂàó„ÅÆÂ†¥Âêà„ÄÅÊúÄÂæå„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÁ¢∫Ë™ç
                    const actionList = Array.isArray(actions) ? actions : [actions];
                    const lastAction = actionList[actionList.length - 1];
                    
                    if (lastAction && lastAction.action === 'Fold') {
                        folded.add(player);
                    }
                });
            }
            
            return folded;
        }

        // „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        // „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞
        function renderShowdown() {
            const grid = document.getElementById('showdownGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            // „É™„Éê„ÉºÂæå„Å´Check‰ª•‰∏ä„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥ÔºàFold‰ª•Â§ñÔºâ„Çí„Åó„Åü„Éó„É¨„Ç§„É§„Éº„ÇíÂèñÂæó
            const playersInShowdown = players.filter(player => {
                // „É™„Éê„Éº„Åæ„Åß„ÅÆÂÖ®„Çπ„Éà„É™„Éº„Éà„ÅßFold„Åó„Å¶„ÅÑ„Å™„ÅÑ„ÅãÁ¢∫Ë™ç
                for (let street of ['preflop', 'flop', 'turn', 'river']) {
                    const actions = playerActions[street][player];
                    if (actions) {
                        const actionList = Array.isArray(actions) ? actions : [actions];
                        const lastAction = actionList[actionList.length - 1];
                        if (lastAction && lastAction.action === 'Fold') {
                            return false;
                        }
                    }
                }
                
                // „É™„Éê„Éº„Åß‰Ωï„Åã„Ç¢„ÇØ„Ç∑„Éß„É≥„Çí„Åó„Å¶„ÅÑ„ÇãÔºàFold‰ª•Â§ñÔºâ
                const riverActions = playerActions.river[player];
                if (riverActions) {
                    const actionList = Array.isArray(riverActions) ? riverActions : [riverActions];
                    return actionList.length > 0 && actionList.some(a => a.action !== 'Fold');
                }
                
                return false;
            });

            // 2‰∫∫‰ª•‰∏ä„ÅÑ„ÇãÂ†¥Âêà„ÅÆ„Åø„Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥Ë°®Á§∫
            if (playersInShowdown.length < 2) {
                return;
            }

            // Ëá™ÂàÜ‰ª•Â§ñ„ÅÆÊÆã„Å£„Å¶„ÅÑ„Çã„Éó„É¨„Ç§„É§„Éº„ÅÆ„Éè„É≥„ÉâÂÖ•ÂäõÔºà2ÊûöÂõ∫ÂÆöÔºâ
            playersInShowdown.forEach(player => {
                if (player === myPosition) return; // Ëá™ÂàÜ„ÅØÈô§Â§ñ
                
                const playerDiv = document.createElement('div');
                playerDiv.className = 'showdown-player';
                playerDiv.innerHTML = `
                    <span class="showdown-player-label">${player}:</span>
                    <div class="card-suits" style="display: flex; gap: 4px;">
                        <select class="select-input" style="min-width: 80px;" 
                                onchange="updateShowdownHand('${player}', 0, this.value)">
                            <option value="">„Ç´„Éº„Éâ1</option>
                            ${Object.keys(suits).map(suit => 
                                ranks.map(rank => `<option value="${suits[suit]}${rank}">${suits[suit]}${rank}</option>`).join('')
                            ).join('')}
                        </select>
                        <select class="select-input" style="min-width: 80px;" 
                                onchange="updateShowdownHand('${player}', 1, this.value)">
                            <option value="">„Ç´„Éº„Éâ2</option>
                            ${Object.keys(suits).map(suit => 
                                ranks.map(rank => `<option value="${suits[suit]}${rank}">${suits[suit]}${rank}</option>`).join('')
                            ).join('')}
                        </select>
                    </div>
                `;
                grid.appendChild(playerDiv);
            });
        }

        // „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥„Éè„É≥„ÉâÊõ¥Êñ∞Ôºà2ÊûöÂõ∫ÂÆöÔºâ
        function updateShowdownHand(player, cardIndex, cardValue) {
            if (!showdownHands[player]) {
                showdownHands[player] = ['', ''];
            }
            
            showdownHands[player][cardIndex] = cardValue;
            
            // Á©∫„ÅÆÂÄ§„ÇíÈô§Â§ñ
            showdownHands[player] = showdownHands[player].filter(c => c !== '');
            
            updateCardButtons();
            updateOutput();
        }

        // „Ç´„Éº„ÉâÈÅ∏Êäû
        function selectCard(suit, rank, street) {
            const cardKey = `${suit}${rank}`;
            let targetArray, maxCards, displayId;
            
            if (street === '') {
                targetArray = cards.holeCards;
                maxCards = 2;
                displayId = 'selectedMyHand';
            } else if (street === 'flop') {
                targetArray = cards.flopCards;
                maxCards = 3;
                displayId = 'selectedFlopCards';
            } else if (street === 'turn') {
                targetArray = cards.turnCards;
                maxCards = 1;
                displayId = 'selectedTurnCards';
            } else if (street === 'river') {
                targetArray = cards.riverCards;
                maxCards = 1;
                displayId = 'selectedRiverCards';
            }

            // „Åô„Åß„Å´ÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™çÔºàÂÖ®„Çπ„Éà„É™„Éº„ÉàÔºâ
            const allCards = [...cards.holeCards, ...cards.flopCards, ...cards.turnCards, ...cards.riverCards];
            if (allCards.includes(cardKey)) {
                // ÈÅ∏ÊäûËß£Èô§
                const index = targetArray.indexOf(cardKey);
                if (index > -1) {
                    targetArray.splice(index, 1);
                }
            } else {
                // ÈÅ∏ÊäûËøΩÂä†
                if (targetArray.length < maxCards) {
                    targetArray.push(cardKey);
                }
            }

            updateCardDisplay(displayId, targetArray);
            updateCardButtons();
            updateOutput();
        }

        // „Ç´„Éº„ÉâË°®Á§∫Êõ¥Êñ∞
        function updateCardDisplay(displayId, cardsArray) {
            const display = document.getElementById(displayId);
            if (!display) return;
            
            display.innerHTML = '';
            
            // Turn: Â∏∏„Å´Flop„Ç´„Éº„Éâ„ÇíË°®Á§∫
            if (displayId === 'selectedTurnCards') {
                cards.flopCards.forEach(card => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card-display';
                    cardDiv.textContent = card;
                    cardDiv.style.opacity = '0.6';
                    cardDiv.style.pointerEvents = 'none';
                    display.appendChild(cardDiv);
                });
                
                // ÈñìÈöî
                if (cardsArray.length > 0 && cards.flopCards.length > 0) {
                    const spacer = document.createElement('span');
                    spacer.style.width = '16px';
                    display.appendChild(spacer);
                }
            }
            
            // River: Â∏∏„Å´Flop + Turn„Ç´„Éº„Éâ„ÇíË°®Á§∫
            if (displayId === 'selectedRiverCards') {
                // Flop„Ç´„Éº„Éâ
                cards.flopCards.forEach(card => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card-display';
                    cardDiv.textContent = card;
                    cardDiv.style.opacity = '0.6';
                    cardDiv.style.pointerEvents = 'none';
                    display.appendChild(cardDiv);
                });
                
                // Turn„Ç´„Éº„Éâ
                cards.turnCards.forEach(card => {
                    const cardDiv = document.createElement('div');
                    cardDiv.className = 'card-display';
                    cardDiv.textContent = card;
                    cardDiv.style.opacity = '0.6';
                    cardDiv.style.pointerEvents = 'none';
                    display.appendChild(cardDiv);
                });
                
                // ÈñìÈöî
                if (cardsArray.length > 0 && (cards.flopCards.length > 0 || cards.turnCards.length > 0)) {
                    const spacer = document.createElement('span');
                    spacer.style.width = '16px';
                    display.appendChild(spacer);
                }
            }
            
            // ÈÅ∏ÊäûÊ∏à„Åø„Ç´„Éº„Éâ„Åå„Å™„ÅÑÂ†¥Âêà„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏ÔºàÂâç„ÅÆ„Ç´„Éº„Éâ„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØË°®Á§∫„Åó„Å™„ÅÑÔºâ
            const hasPreviousCards = (displayId === 'selectedTurnCards' && cards.flopCards.length > 0) ||
                                     (displayId === 'selectedRiverCards' && (cards.flopCards.length > 0 || cards.turnCards.length > 0));
            
            if (cardsArray.length === 0 && !hasPreviousCards) {
                display.innerHTML = '<span class="empty-message">„Ç´„Éº„Éâ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</span>';
            }
            
            // ÁèæÂú®„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅßÈÅ∏Êäû„Åó„Åü„Ç´„Éº„Éâ
            cardsArray.forEach(card => {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'card-display';
                cardDiv.textContent = card;
                cardDiv.onclick = () => {
                    const street = displayId.includes('MyHand') ? '' : 
                                   displayId.includes('Flop') ? 'flop' :
                                   displayId.includes('Turn') ? 'turn' : 'river';
                    const suit = card.slice(0, 2);
                    const rank = card.slice(2);
                    selectCard(suit, rank, street);
                };
                display.appendChild(cardDiv);
            });
        }

        // „Ç´„Éº„Éâ„Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞ÔºàÂÆåÂÖ®„Å™Êéí‰ªñÂà∂Âæ°Ôºâ
        function updateCardButtons() {
            const allSelected = [...cards.holeCards, ...cards.flopCards, ...cards.turnCards, ...cards.riverCards];
            
            // „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥„ÅßÈÅ∏Êäû„Åï„Çå„Åü„Ç´„Éº„Éâ„ÇÇËøΩÂä†
            Object.values(showdownHands).forEach(handCards => {
                allSelected.push(...handCards);
            });
            
            document.querySelectorAll('.card-btn').forEach(btn => {
                const suit = btn.closest('.suit-row').querySelector('.suit-label').textContent;
                const rank = btn.textContent;
                const cardKey = `${suit}${rank}`;
                
                // „Å©„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅßÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÂà§ÂÆö
                const inHole = cards.holeCards.includes(cardKey);
                const inFlop = cards.flopCards.includes(cardKey);
                const inTurn = cards.turnCards.includes(cardKey);
                const inRiver = cards.riverCards.includes(cardKey);
                const inShowdown = Object.values(showdownHands).some(hand => hand.includes(cardKey));
                
                // ÁèæÂú®„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÇíÂà§ÂÆöÔºà„Éú„Çø„É≥„ÅÆË¶™Ë¶ÅÁ¥†„Åã„ÇâÔºâ
                const container = btn.parentElement;
                const containerId = container.id;
                const currentStreet = containerId.includes('myHand') ? 'hole' :
                                     containerId.includes('flop') ? 'flop' :
                                     containerId.includes('turn') ? 'turn' :
                                     containerId.includes('river') ? 'river' : 'unknown';
                
                // „Åì„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅßÈÅ∏Êäû„Åï„Çå„Å¶„ÅÑ„Çã„Åã
                const isCurrentStreet = (currentStreet === 'hole' && inHole) ||
                                       (currentStreet === 'flop' && inFlop) ||
                                       (currentStreet === 'turn' && inTurn) ||
                                       (currentStreet === 'river' && inRiver);
                
                // ÈÅ∏ÊäûÁä∂ÊÖã„ÅÆË°®Á§∫
                btn.classList.toggle('selected', isCurrentStreet);
                
                // ‰ªñ„ÅÆ„Çπ„Éà„É™„Éº„Éà„ÅßÈÅ∏ÊäûÊ∏à„Åø„ÅÆÂ†¥Âêà„ÅØÂÆåÂÖ®„Å´ÁÑ°ÂäπÂåñ
                const selectedElsewhere = allSelected.includes(cardKey) && !isCurrentStreet;
                
                if (selectedElsewhere) {
                    btn.style.opacity = '0.3';
                    btn.style.pointerEvents = 'none';
                    btn.style.cursor = 'not-allowed';
                } else {
                    btn.style.opacity = '1';
                    btn.style.pointerEvents = 'auto';
                    btn.style.cursor = 'pointer';
                }
            });
        }

        // Âá∫ÂäõÊõ¥Êñ∞
        function updateOutput() {
            let output = '';
            
            // „Ç≤„Éº„É†„Çø„Ç§„Éó
            if (gameType) {
                output += `„Äê${gameType === 'tournament' ? '„Éà„Éº„Éä„É°„É≥„Éà' : '„É™„É≥„Ç∞„Ç≤„Éº„É†'}„Äë\n\n`;
            }
            
            // Preflop
            if (cards.holeCards.length > 0 || Object.keys(playerActions.preflop).length > 0) {
                output += '„ÄêPreflop„Äë';
                if (cards.holeCards.length > 0) {
                    output += ` ${cards.holeCards.join(' ')}`;
                }
                output += '\n';
                
                Object.entries(playerActions.preflop).forEach(([player, data]) => {
                    const actionList = Array.isArray(data) ? data : [data];
                    actionList.forEach(actionData => {
                        const actionText = actionData.amount ? `${actionData.action} ${actionData.amount}` : actionData.action;
                        output += `${player}: ${actionText}\n`;
                    });
                });
                output += '\n';
            }

            // Flop
            if (cards.flopCards.length > 0 || Object.keys(playerActions.flop).length > 0) {
                output += '„ÄêFlop„Äë';
                if (cards.flopCards.length > 0) {
                    output += ` ${cards.flopCards.join(' ')}`;
                }
                output += '\n';
                
                Object.entries(playerActions.flop).forEach(([player, data]) => {
                    const actionList = Array.isArray(data) ? data : [data];
                    actionList.forEach(actionData => {
                        const actionText = actionData.amount ? `${actionData.action} ${actionData.amount}` : actionData.action;
                        output += `${player}: ${actionText}\n`;
                    });
                });
                output += '\n';
            }

            // Turn
            if (cards.turnCards.length > 0 || Object.keys(playerActions.turn).length > 0) {
                output += '„ÄêTurn„Äë';
                if (cards.flopCards.length > 0 || cards.turnCards.length > 0) {
                    output += ` ${[...cards.flopCards, ...cards.turnCards].join(' ')}`;
                }
                output += '\n';
                
                Object.entries(playerActions.turn).forEach(([player, data]) => {
                    const actionList = Array.isArray(data) ? data : [data];
                    actionList.forEach(actionData => {
                        const actionText = actionData.amount ? `${actionData.action} ${actionData.amount}` : actionData.action;
                        output += `${player}: ${actionText}\n`;
                    });
                });
                output += '\n';
            }

            // River
            if (cards.riverCards.length > 0 || Object.keys(playerActions.river).length > 0) {
                output += '„ÄêRiver„Äë';
                if (cards.flopCards.length > 0 || cards.turnCards.length > 0 || cards.riverCards.length > 0) {
                    output += ` ${[...cards.flopCards, ...cards.turnCards, ...cards.riverCards].join(' ')}`;
                }
                output += '\n';
                
                Object.entries(playerActions.river).forEach(([player, data]) => {
                    const actionList = Array.isArray(data) ? data : [data];
                    actionList.forEach(actionData => {
                        const actionText = actionData.amount ? `${actionData.action} ${actionData.amount}` : actionData.action;
                        output += `${player}: ${actionText}\n`;
                    });
                });
                output += '\n';
            }

            // „Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥
            if (Object.keys(showdownHands).length > 0) {
                output += '„Äê„Ç∑„Éß„Éº„ÉÄ„Ç¶„É≥„Äë\n';
                Object.entries(showdownHands).forEach(([player, cards]) => {
                    if (cards.length > 0) {
                        output += `${player}: ${cards.join(' ')}\n`;
                    }
                });
                output += '\n';
            }

            // ÂèéÊîØ
            const result = document.getElementById('resultAmount')?.value;
            if (result) {
                output += `„ÄêÂèéÊîØ„Äë${result}\n`;
            }

            document.getElementById('outputBox').textContent = output || 'Ë®òÈå≤„Åå„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì';
        }

        // ÂèéÊîØÂÖ•Âäõ„ÅÆÁõ£Ë¶ñ
        document.addEventListener('DOMContentLoaded', function() {
            const resultInput = document.getElementById('resultAmount');
            if (resultInput) {
                resultInput.addEventListener('input', updateOutput);
            }
        });

        // „Ç≥„Éî„ÉºÊ©üËÉΩ
        function copyToClipboard() {
            const text = document.getElementById('outputBox').textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = document.getElementById('copyBtn');
                btn.textContent = '‚úì „Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ';
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.textContent = 'üìã „Ç≥„Éî„Éº';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´ÂàùÊúüÂåñ
        init();
    </script>
</body>
</html>
